import React, { useState, useEffect } from "react";
import { Link, useParams } from "react-router-dom";
import Item from "./Item";
import data from "../products.json";
import { useDispatch } from "react-redux";
import { addItem } from "./utils/cartSlice";
import Fade from "react-bootstrap/Fade";
import  placeholder  from '../../public/images/placeholder.png';

const DetailView = () => {
  const [open, setOpen] = useState(false);
  const { id, category } = useParams();
  const [product, setProduct] = useState({});
  const dispatch = useDispatch();

  const handleAddToCart = (product) => {
    event.preventDefault();
    dispatch(addItem(product));
  };
  useEffect(() => {
    const selectedProduct = data.find((p) => p.category === category);
    console.log(category);
    setProduct(selectedProduct);
    console.log(selectedProduct);
  }, [category, data]);
  return (
    <>
      <div className="container-xl py-6">
        <div className="container-xl my-5">
          <nav aria-label="breadcrumb">
            <ol className="breadcrumb">
              <li className="breadcrumb-item">
                <Link to="/">Home</Link>
              </li>
              <li className="breadcrumb-item active" aria-current="page">
                {product.title}
              </li>
            </ol>
          </nav>
          <div className="row">
            <div className="col-md-8">
              <h4 className="par-title mb-1 bold">About this product</h4>
              <p className="dummy-description mb-4">
                Lorem ipsum dolor sit amet consectetur, adipisicing elit. Quis
                assumenda voluptatem tempore dolor quod. Expedita, id, minus
                similique dolor sed adipisci aliquam natus amet doloremque
                delectus cupiditate? Sint, quasi, ad necessitatibus omnis
                quaerat tenetur corporis porro aut, natus ex ab id vel odit
                veniam fugiat temporibus aperiam quia rem minima!
              </p>
              <div className="border-top">
                <h4 className="par-title mt-4 mb-1 bold">
                  Select your desired service under {product.category}
                </h4>

                <ul className="list-group sub_list--ul default-list">
                  {product.sub_category ? (
                    product.sub_category.map((subItem) => (
                      <li key={subItem.sub_id}>
                        <div className="sub_list-items">
                          <div className="fl-80">
                            <h6>{subItem.title}</h6>
                            <p>{subItem.description}</p>
                            <p>
                              Price:{" "}
                              <b className="fw-normal">{subItem.price}</b>
                            </p>
                            <p>
                              Rating:
                              <b className="fw-normal"> {subItem.Rating}</b>
                            </p>
                            <button
                              type="button"
                              className="btn btn-secondary btn-sm me-2"
                              onClick={() => setOpen(!open)}
                              aria-controls="example-fade-text"
                              aria-expanded={open}
                            >
                             
                              View Details
                            </button>
                            <button
                              type="button"
                              className="btn btn-primary btn-sm"
                              onClick={() => handleAddToCart(subItem)}>
                            
                              Add
                            </button>
                           
                          </div>
                          <div className="fl-20">
                          {subItem.image ? (
                            <img src={placeholder} alt="image" className="w-100" />
                          ) : (
                            <p>No image available</p>
                          )}
                           
                          </div>
                        </div>
                      </li>
                    ))
                  ) : (
                    <p>No sub-categories available</p>
                  )}
                </ul>
              </div>
             
            </div>
            <div className="col-md-4">
              <div className="product_offers">
                <h5 className="bold my-3">Offers</h5>
                <div className="product-offers-list" id="CX-offers">
                  <div className="CX-seemore">
                    <div className="d-flex my-3">
                      <div className="offer-list-prefix-icon">
                        <svg
                          width="24"
                          height="24"
                          viewBox="0 0 24 24"
                          fill="none"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <path
                            d="M13.5682 21.0011C13.6608 20.7764 13.8004 20.5741 13.9778 20.4079C14.1552 20.2418 14.3662 20.1156 14.5965 20.0379C14.8268 19.9601 15.0711 19.9327 15.3129 19.9574C15.5547 19.9821 15.7884 20.0584 15.9982 20.1811C16.285 20.3506 16.615 20.4326 16.9478 20.4171C17.2806 20.4016 17.6016 20.2892 17.8714 20.0938C18.1412 19.8984 18.348 19.6284 18.4665 19.317C18.5849 19.0056 18.6098 18.6664 18.5382 18.3411C18.4845 18.1038 18.4821 17.8578 18.531 17.6195C18.58 17.3812 18.6793 17.1561 18.8222 16.9592C18.9652 16.7623 19.1484 16.5982 19.3599 16.4778C19.5713 16.3575 19.8059 16.2836 20.0482 16.2611C20.3887 16.2426 20.7158 16.122 20.9869 15.9152C21.258 15.7083 21.4606 15.4247 21.5685 15.1012C21.6763 14.7777 21.6844 14.4292 21.5916 14.1011C21.4988 13.7729 21.3095 13.4803 21.0482 13.2611C20.867 13.1007 20.722 12.9036 20.6227 12.6829C20.5234 12.4623 20.4721 12.2231 20.4721 11.9811C20.4721 11.7391 20.5234 11.4999 20.6227 11.2793C20.722 11.0586 20.867 10.8616 21.0482 10.7011C21.3095 10.482 21.4988 10.1893 21.5916 9.86115C21.6844 9.533 21.6763 9.18452 21.5685 8.861C21.4606 8.53749 21.258 8.25388 20.9869 8.04703C20.7158 7.84018 20.3887 7.71965 20.0482 7.70111C19.8059 7.67865 19.5713 7.60476 19.3599 7.48437C19.1484 7.36398 18.9652 7.19987 18.8222 7.003C18.6793 6.80612 18.58 6.58101 18.531 6.34271C18.4821 6.10441 18.4845 5.8584 18.5382 5.62111C18.6001 5.29873 18.5678 4.96535 18.4454 4.66079C18.3229 4.35622 18.1154 4.09334 17.8476 3.90354C17.5797 3.71374 17.2629 3.60504 16.935 3.59042C16.607 3.5758 16.2818 3.65589 15.9982 3.82111C15.7884 3.9438 15.5547 4.02008 15.3129 4.04479C15.0711 4.0695 14.8268 4.04207 14.5965 3.96436C14.3662 3.88664 14.1552 3.76045 13.9778 3.59428C13.8004 3.42812 13.6608 3.22584 13.5682 3.00111C13.4359 2.69454 13.2167 2.43342 12.9377 2.24996C12.6587 2.06651 12.3321 1.96875 11.9982 1.96875C11.6643 1.96875 11.3377 2.06651 11.0587 2.24996C10.7797 2.43342 10.5605 2.69454 10.4282 3.00111C10.3356 3.22584 10.1959 3.42812 10.0185 3.59428C9.84112 3.76045 9.63017 3.88664 9.39987 3.96436C9.16957 4.04207 8.92528 4.0695 8.68348 4.04479C8.44168 4.02008 8.20799 3.9438 7.99817 3.82111C7.71137 3.65161 7.38131 3.56957 7.04853 3.58508C6.71575 3.60059 6.39474 3.71296 6.12495 3.9084C5.85516 4.10384 5.64833 4.37383 5.52988 4.6852C5.41142 4.99657 5.3865 5.33577 5.45817 5.66111C5.51177 5.89463 5.5157 6.13682 5.46969 6.37196C5.42369 6.60711 5.32878 6.82996 5.19113 7.02607C5.05348 7.22218 4.87614 7.38717 4.67063 7.51035C4.46512 7.63353 4.23602 7.71215 3.99817 7.74111C3.65766 7.75965 3.33059 7.88018 3.05947 8.08703C2.78835 8.29388 2.5857 8.57749 2.47786 8.901C2.37002 9.22452 2.36198 9.573 2.45476 9.90115C2.54755 10.2293 2.73689 10.522 2.99817 10.7411C3.1793 10.9016 3.32431 11.0986 3.42362 11.3193C3.52293 11.5399 3.57429 11.7791 3.57429 12.0211C3.57429 12.2631 3.52293 12.5023 3.42362 12.7229C3.32431 12.9436 3.1793 13.1407 2.99817 13.3011C2.73689 13.5203 2.54755 13.8129 2.45476 14.1411C2.36198 14.4692 2.37002 14.8177 2.47786 15.1412C2.5857 15.4647 2.78835 15.7483 3.05947 15.9552C3.33059 16.162 3.65766 16.2826 3.99817 16.3011C4.24042 16.3236 4.47508 16.3975 4.68649 16.5178C4.8979 16.6382 5.08119 16.8023 5.22412 16.9992C5.36704 17.1961 5.46631 17.4212 5.5153 17.6595C5.56428 17.8978 5.56185 18.1438 5.50817 18.3811C5.45363 18.6966 5.48874 19.021 5.60953 19.3175C5.73031 19.6141 5.93191 19.8707 6.19137 20.0583C6.45084 20.2458 6.75775 20.3568 7.07718 20.3785C7.3966 20.4002 7.71571 20.3318 7.99817 20.1811C8.2061 20.0576 8.43799 19.9798 8.67836 19.9531C8.91872 19.9263 9.16203 19.9512 9.39203 20.0259C9.62203 20.1007 9.83343 20.2237 10.0121 20.3867C10.1908 20.5497 10.3326 20.7489 10.4282 20.9711C10.5575 21.279 10.7742 21.5422 11.0515 21.7284C11.3287 21.9145 11.6544 22.0154 11.9883 22.0186C12.3222 22.0218 12.6498 21.9271 12.9305 21.7463C13.2113 21.5655 13.4329 21.3064 13.5682 21.0011ZM9.24817 8.00111C9.4954 8.00111 9.73707 8.07442 9.94264 8.21177C10.1482 8.34912 10.3084 8.54434 10.403 8.77275C10.4976 9.00116 10.5224 9.25249 10.4742 9.49497C10.4259 9.73745 10.3069 9.96018 10.1321 10.135C9.95724 10.3098 9.73451 10.4289 9.49204 10.4771C9.24956 10.5253 8.99823 10.5006 8.76982 10.406C8.54141 10.3113 8.34619 10.1511 8.20884 9.94557C8.07148 9.74001 7.99817 9.49833 7.99817 9.25111C7.99817 8.91959 8.12987 8.60164 8.36429 8.36722C8.59871 8.1328 8.91665 8.00111 9.24817 8.00111ZM14.7482 16.0011C14.5009 16.0011 14.2593 15.9278 14.0537 15.7904C13.8481 15.6531 13.6879 15.4579 13.5933 15.2295C13.4987 15.0011 13.474 14.7497 13.5222 14.5072C13.5704 14.2648 13.6895 14.042 13.8643 13.8672C14.0391 13.6924 14.2618 13.5734 14.5043 13.5251C14.7468 13.4769 14.9981 13.5016 15.2265 13.5963C15.4549 13.6909 15.6502 13.8511 15.7875 14.0566C15.9249 14.2622 15.9982 14.5039 15.9982 14.7511C15.9982 15.0826 15.8665 15.4006 15.6321 15.635C15.3976 15.8694 15.0797 16.0011 14.7482 16.0011ZM15.7482 9.71111L9.74817 15.7111C9.65521 15.8048 9.54461 15.8792 9.42275 15.93C9.30089 15.9808 9.17018 16.0069 9.03817 16.0069C8.90616 16.0069 8.77545 15.9808 8.6536 15.93C8.53174 15.8792 8.42114 15.8048 8.32817 15.7111C8.23444 15.6181 8.16005 15.5075 8.10928 15.3857C8.05851 15.2638 8.03237 15.1331 8.03237 15.0011C8.03237 14.8691 8.05851 14.7384 8.10928 14.6165C8.16005 14.4947 8.23444 14.3841 8.32817 14.2911L14.3282 8.29111C14.5165 8.1028 14.7719 7.99701 15.0382 7.99701C15.3045 7.99701 15.5599 8.1028 15.7482 8.29111C15.9365 8.47941 16.0423 8.73481 16.0423 9.00111C16.0423 9.26741 15.9365 9.5228 15.7482 9.71111Z"
                            fill="#00B259"
                          />
                        </svg>
                      </div>
                      <div className="offer-list-content-caption mx-2">
                        <h6 className="">ADDITIONAL OFFERS</h6>
                        <div className="">
                          Flat 1% instant discount up to Rs. 25 on UPI
                          transactions above Rs. 200 (applicable once per user,
                          on select products)
                        </div>
                      </div>
                    </div>
                    <div className="d-flex my-3">
                      <div className="offer-list-prefix-icon">
                        <svg
                          width="24"
                          height="24"
                          viewBox="0 0 24 24"
                          fill="none"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <path
                            d="M19.9984 18.9995H17.9984V9.99945H18.9984C19.4599 10.0009 19.9077 9.84265 20.2659 9.55158C20.6241 9.26052 20.8705 8.85454 20.9635 8.40248C21.0565 7.95043 20.9903 7.48012 20.7761 7.0713C20.562 6.66249 20.213 6.34033 19.7884 6.15945L12.7884 3.15945C12.538 3.05548 12.2695 3.00195 11.9984 3.00195C11.7272 3.00195 11.4588 3.05548 11.2084 3.15945L4.20838 6.15945C3.78377 6.34033 3.43479 6.66249 3.22061 7.0713C3.00642 7.48012 2.94022 7.95043 3.03322 8.40248C3.12622 8.85454 3.3727 9.26052 3.73087 9.55158C4.08904 9.84265 4.53685 10.0009 4.99838 9.99945H5.99838V18.9995H3.99838C3.73316 18.9995 3.47881 19.1048 3.29127 19.2923C3.10373 19.4799 2.99838 19.7342 2.99838 19.9995C2.99838 20.2647 3.10373 20.519 3.29127 20.7066C3.47881 20.8941 3.73316 20.9995 3.99838 20.9995H19.9984C20.2636 20.9995 20.5179 20.8941 20.7055 20.7066C20.893 20.519 20.9984 20.2647 20.9984 19.9995C20.9984 19.7342 20.893 19.4799 20.7055 19.2923C20.5179 19.1048 20.2636 18.9995 19.9984 18.9995ZM15.9984 18.9995H12.9984V9.99945H15.9984V18.9995ZM7.99838 9.99945H10.9984V18.9995H7.99838V9.99945Z"
                            fill="#00B259"
                          />
                        </svg>
                      </div>
                      <div className="offer-list-content-caption mx-2">
                        <h6 className="">BANK OFFERS</h6>
                        <div className="">
                          Flat 1% 10% Instant Discount. Min. Trnx 1500/- Max
                          Discount Up to Rs. 750/- On ICICI Bank Credit Cards.
                        </div>
                      </div>
                    </div>

                    <div className="d-flex my-3">
                      <div className="offer-list-prefix-icon">
                        <svg
                          width="24"
                          height="24"
                          viewBox="0 0 24 24"
                          fill="none"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <path
                            d="M19 5H5C4.20435 5 3.44129 5.31607 2.87868 5.87868C2.31607 6.44129 2 7.20435 2 8V16C2 16.7956 2.31607 17.5587 2.87868 18.1213C3.44129 18.6839 4.20435 19 5 19H19C19.7956 19 20.5587 18.6839 21.1213 18.1213C21.6839 17.5587 22 16.7956 22 16V8C22 7.20435 21.6839 6.44129 21.1213 5.87868C20.5587 5.31607 19.7956 5 19 5ZM9.25 8C9.49723 8 9.7389 8.07331 9.94446 8.21066C10.15 8.34801 10.3102 8.54324 10.4048 8.77165C10.4995 9.00005 10.5242 9.25139 10.476 9.49386C10.4278 9.73634 10.3087 9.95907 10.1339 10.1339C9.95907 10.3087 9.73634 10.4278 9.49386 10.476C9.25139 10.5242 9.00005 10.4995 8.77165 10.4048C8.54324 10.3102 8.34801 10.15 8.21066 9.94446C8.07331 9.7389 8 9.49723 8 9.25C8 8.91848 8.1317 8.60054 8.36612 8.36612C8.60054 8.1317 8.91848 8 9.25 8ZM14.75 16C14.5028 16 14.2611 15.9267 14.0555 15.7893C13.85 15.652 13.6898 15.4568 13.5952 15.2284C13.5005 14.9999 13.4758 14.7486 13.524 14.5061C13.5722 14.2637 13.6913 14.0409 13.8661 13.8661C14.0409 13.6913 14.2637 13.5722 14.5061 13.524C14.7486 13.4758 14.9999 13.5005 15.2284 13.5952C15.4568 13.6898 15.652 13.85 15.7893 14.0555C15.9267 14.2611 16 14.5028 16 14.75C16 15.0815 15.8683 15.3995 15.6339 15.6339C15.3995 15.8683 15.0815 16 14.75 16ZM15.75 9.71L9.75 15.71C9.65704 15.8037 9.54644 15.8781 9.42458 15.9289C9.30272 15.9797 9.17201 16.0058 9.04 16.0058C8.90799 16.0058 8.77728 15.9797 8.65542 15.9289C8.53356 15.8781 8.42296 15.8037 8.33 15.71C8.23627 15.617 8.16188 15.5064 8.11111 15.3846C8.06034 15.2627 8.0342 15.132 8.0342 15C8.0342 14.868 8.06034 14.7373 8.11111 14.6154C8.16188 14.4936 8.23627 14.383 8.33 14.29L14.33 8.29C14.5183 8.1017 14.7737 7.99591 15.04 7.99591C15.3063 7.99591 15.5617 8.1017 15.75 8.29C15.9383 8.4783 16.0441 8.7337 16.0441 9C16.0441 9.2663 15.9383 9.5217 15.75 9.71Z"
                            fill="#00B259"
                          />
                        </svg>
                      </div>
                      <div className="offer-list-content-caption mx-2">
                        <h6 className="">COUPOUNS</h6>
                        <div className="">
                          Shop worth 999 and every 100th customers to win Dhoni
                          signed jersey FREE!
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </>
  );
};

export default DetailView;
